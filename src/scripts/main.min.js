"use strict";$(document).ready((function(){const e=function(e,t,o){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(screen.width<o)if(n)for(let o=0;o<$(e).length;o++)$(t).eq(o).after($(e).eq(1===$(t).length?0:o));else if(s)for(let o=0;o<$(e).length;o++)$(e).eq(o).appendTo($(t).eq(1===$(t).length?0:o));else for(let o=0;o<$(e).length;o++)$(e).eq(o).prependTo($(t).eq(1===$(t).length?0:o))};function t(e,t){var o=document.createElement("script");o.readyState?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,t())}:o.onload=function(){t()},o.src=e,document.getElementsByTagName("head")[0].appendChild(o)}e(".testimonial .rating-box",".testimonial__content-box--product",991,!1,!0),e(".testimonial__rm-additional-wrapper",".testimonial .rating-box",991,!1,!0),e(".testimonial__answer-box",".testimonial__rm-additional-wrapper",991,!1,!0),e(".product-card-main__name",".product-card-main__inner",991,!1),e(".modal__tags-wrapper",".modal__rating-left",991,!1,!0),e(".modal .file-upload",".modal__fields",991,!1,!0),e(".category-sidebar__categories",".category-top__container",991,!1,!1),setTimeout((function(){const e=$(".header"),o=e.height(),s=$(".category-sidebar__categories");let n,i,a;s.length>0&&(n=s.offset().top,i=s.innerHeight(),e.addClass("fixed"),a=e.height(),e.removeClass("fixed"));const r=()=>{$(document).scrollTop()>=o?(e.addClass("fixed"),$("body").css("padding-top",o)):(e.removeClass("fixed"),$("body").css("padding-top",0))};let c=!1;const l=()=>{$(".ya-share2").each((function(){console.log(c),!c&&$(this).visible()&&(c=!0,t("https://yastatic.net/share2/share.js",()=>{}))}))};$(".js-test").on("click",(function(){console.log(123),$("body").append('<div id="modal-quick-view">\n<div class="modal-body"></div>\n</div>')})),$(window).on("quickView",(function(){console.log(222)}));const d=()=>{$(window).scrollTop()>n?(s.addClass("fixed"),s.css("top",a),s.parent().css("padding-top",i)):(s.removeClass("fixed").removeAttr("style"),s.parent().removeAttr("style"))};r(),l(),screen.width<992&&s.length>0&&d(),window.addEventListener("scroll",(function(){r(),l(),screen.width<992&&d()}),{passive:!0}),document.querySelector("#modal-quick-view .modal__body").addEventListener("scroll",(function(){l()}),{passive:!0})}),100),$(".js-close-promo").on("click",(function(){$(this).parents(".top-promo").slideUp()})),$(".js-mobile-search-toggle").on("click",(function(){$(".header__mobile-search").slideDown()})),$(".js-close-search").on("click",(function(){$(".header__mobile-search").slideUp()}));const o=e=>{const t=e.attr("data-rating");let o=0;e.find(".rating-stars__star").removeClass("filled").each((function(){o<Math.floor(t)&&($(this).addClass("filled"),o++)}))};$(".js-stars").each((function(){o($(this))})),$(document).on("click",".js-input-stars .rating-stars__star",(function(){const e=$(this).parent(".js-input-stars");e.attr("data-rating",$(this).index()+1),o(e)})),$(document).on("click",".js-close",(function(){const e=$(this).parent();e.removeClass("opened"),screen.width<768&&e.hasClass("color-size-picker")&&$(this).parents(".product-slider-redesign").removeClass("arrows-hidden")})),$(document).on("click",".js-open-picker",(function(){$(this).parents(".product-preview").find(".color-size-picker").addClass("opened"),screen.width<768&&$(this).parents(".product-slider-redesign").addClass("arrows-hidden")})),$(document).on("click",".js-add-to-cart",(function(e){e.preventDefault();const t=$(this).parents(".product-preview"),o=t.find(".product-preview__add-to-cart");$(this).parents(".color-size-picker").removeClass("opened"),o.addClass("active"),t.hasClass("product-preview--accessory")&&o.text("В корзину"),screen.width<768&&$(this).parents(".product-slider-redesign").removeClass("arrows-hidden")})),$(document).on("click",".js-active-toggle",(function(){$(this).toggleClass("active")})),$(document).on("click",".js-only-active-toggle",(function(){$(this).parent().find(".js-only-active-toggle").removeClass("active"),$(this).addClass("active")})),$(document).on("click",".js-product-card-cart",(function(e){e.preventDefault(),$(this).addClass("active"),$(this).find("span").text("Перейти в корзину")}));new Swiper(".js-product-slider-redesign",{loop:!0,slidesPerView:1,spaceBetween:0,navigation:{nextEl:".product-slider-redesign__arrow--next",prevEl:".product-slider-redesign__arrow--prev"},breakpoints:{1199:{slidesPerView:4},991:{slidesPerView:3},600:{slidesPerView:2}}}),new Swiper(".js-shop-rating-slider",{slidesPerView:1,spaceBetween:0,observer:!0,observeParents:!0,navigation:{nextEl:".shop-rating__arrow--next",prevEl:".shop-rating__arrow--prev"},breakpoints:{1199:{slidesPerView:2}}});const s=(e,t)=>{const o=new Swiper(e,{slidesPerView:3,spaceBetween:10,direction:"horizontal",watchSlidesProgress:!0,observer:!0,observeParents:!0,loop:!0,navigation:{nextEl:".product-card-main__arrow--next",prevEl:".product-card-main__arrow--prev"},breakpoints:{767:{slidesPerView:4,spaceBetween:20,direction:"vertical"}}});new Swiper(t,{slidesPerView:1,loop:!0,thumbs:{swiper:o}})};$(".js-product-thumbs-slider").each((function(){s($(this)[0],$(this).parents(".product-card-main__gallery").find(".js-product-main-slider")[0])})),$(document).on("click",".js-quick-view",(function(){p($("#modal-quick-view"),"modal-bg"),s($("#modal-quick-view .js-product-thumbs-slider-modal")[0],$("#modal-quick-view .js-product-main-slider-modal")[0])})),screen.width>1199&&($(".js-swipe-scroll").each((function(){!function(e,t){if(null!==t){t.style.cursor="grab";let o=!1,s={top:0,left:0,x:0,y:0};const n=function(e){t.style.cursor="grabbing",t.style.userSelect="none",s={left:t.scrollLeft,top:t.scrollTop,x:e.clientX,y:e.clientY},document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)},i=function(e){const n=e.clientX-s.x,i=e.clientY-s.y;t.scrollTop=s.top-i,t.scrollLeft=s.left-n,o=!0},a=function(e){t.style.cursor="grab",t.style.removeProperty("user-select"),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};t.querySelectorAll(e+"> *").forEach((function(e){e.addEventListener("click",(function(e){o&&e.preventDefault(),o=!1}))})),$(document).on("dragstart",e,(function(){return!1})),t.addEventListener("mousedown",n)}}("."+$(this).attr("class").split(/\s+/)[0],$(this)[0])})),$(".js-swipe-scroll > *").attr("draggable","false"),$(".js-swipe-scroll img").attr("draggable","false")),function(){var e=document.querySelector(".our-works__map");if(!e)return;var o=e.querySelector(".loader");let s=[{id:"works-map",isMultiPoint:!0}];function n(){function t(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=$("#"+e).attr("data-json"),s=[],n=[0,0],i=[0,0];$.getJSON(o,(function(o){function a(e){document.querySelector("body").classList.remove("scroll-hidden"),e.remove()}o.map((function(e){n[0]+=e.coords[0],n[1]+=e.coords[1],s.push(new ymaps.Placemark(e.coords,{balloonContent:`<div class="our-works__bubble" data-id="${e.id}">\n                                                <div class="our-works__name">${e.name}</div>\n                                                <div class="our-works__date">${e.date}</div>\n                                                <a class="our-works__map-link" href="${e.link}">Подробнее</a>\n                                            </div>`},{iconLayout:"default#image",iconImageHref:"img/svg/marker.svg"}))})),t?(i[0]=+(n[0]/o.length).toFixed(4),i[1]=+(n[1]/o.length).toFixed(4)):i=n,document.addEventListener("click",(function(e){if(e.target.closest(".our-works__map-link")){var t=document.querySelector(".our-works__bubble"),s=t.parentElement.parentElement.parentElement.previousElementSibling,n=t.getAttribute("data-id"),i=o.find(e=>e.id==n);document.querySelector("body").classList.add("scroll-hidden"),e.preventDefault(),s.click(),function(e){var t=document.querySelector("#works-map-template").content.querySelector(".works-modal").cloneNode(!0),o=document.querySelector(".our-works__map"),s=document.createDocumentFragment();if(t){var n=t.querySelector(".works-modal__close"),i=t.querySelector(".our-project__img"),r=i.querySelector("a"),c=r.querySelector("img"),l=r.querySelector(".icon-photo-camera"),d=r.querySelector(".icon-play-btn"),u=r.querySelector(".our-project__img-num");e.desc&&(t.querySelector(".our-project__desc").textContent=e.desc),e.name&&(t.querySelector(".our-project__title").textContent=e.name),e.date&&(t.querySelector(".our-project__date").textContent=e.date),i.setAttribute("data-count",e.count),r.href=e.images[0].link,r.setAttribute("data-fancybox","works-map-"+e.id),c.alt=e.name,c.src=e.images[0].thumb,u.textContent=e.count,!0===e.images[0].isVideo?l.remove():(d.remove(),r.removeAttribute("data-video-project"));for(var p=1;p<e.images.length;p++){var m=r.cloneNode(!0),f=m.querySelector("img");m.querySelector(".our-project__cover").remove(),m.href=e.images[p].link,f.src=e.images[p].thumb,f.style.display="none",!0!==e.images[p].isVideo&&m.removeAttribute("data-video-project"),i.appendChild(m)}document.addEventListener("click",(function(e){e.target.closest(".fancybox-stage")&&!e.target.closest(".fancybox-content")&&a(t),e.target.closest(".works-modal")&&!e.target.closest(".works-modal__content")&&a(t)})),document.addEventListener("keydown",(function(e){27===e.keyCode&&a(t)})),i.addEventListener("click",(function(){setTimeout((function(){document.querySelector(".fancybox-button--close").addEventListener("click",(function(){a(t)}))}),50)})),n.addEventListener("click",(function(){var e=document.querySelector(".works-modal");null!==e&&a(e)})),t.classList.add("active"),s.appendChild(t),o.appendChild(s)}}(i)}}));var r=new ymaps.Map(e,{center:i,zoom:4,controls:["zoomControl"]});if(t){var c=new ymaps.Clusterer({clusterIcons:[{href:"img/svg/marker.svg",size:[40,40],offset:[-20,-20]},{href:"img/svg/marker.svg",size:[50,50],offset:[-30,-30]}],clusterNumbers:[10],clusterIconContentLayout:null});c.add(s),r.geoObjects.add(c)}else r.geoObjects.add(s[0]);r.behaviors.disable("scrollZoom")}))}s.forEach(e=>{$("#"+e.id).length>0&&t(e.id,e.isMultiPoint)}),e.querySelector(".placeholder").style.display="none",o&&o.classList.remove("is-active")}e.addEventListener("mouseenter",(function o(){e.removeEventListener("mouseenter",o);const s=e.querySelector(".loader");s&&s.classList.add("is-active"),t("https://api-maps.yandex.ru/2.1/?apikey=04709a29-6f21-442a-9cb5-272b39900456&lang=ru_RU",(function(){ymaps.ready(n)}))}))}(),$(".js-checkbox").on("click",(function(e){if("a"!==e.target.tagName.toLowerCase()){e.preventDefault();let t=$(this).find('input[type="checkbox"]').prop("checked");$(this).toggleClass("checked").find(".custom-cb-badge, .custom-cb-badge-allow").toggleClass("checked"),$(this).find('input[type="checkbox"]').prop("checked",!t)}}));const n=(e,t)=>{e.length>0&&e.each((function(){const e=$(this).parents(".js-read-more-wrapper");$(this).height()<t&&(e.css("height","auto"),e.find(".js-read-more-toggle").hide(),e.siblings(".js-read-more-toggle").hide(),e.find(".read-more-bg").hide())}))};let i,a;function r(e){const t=e.find('input[type="checkbox"]:checked').length;!$(".product-filters__clear-all").length&&t&&$(window).width()>768&&$(".product-filters").append("<button type='button' class='product-filters__clear-all'>Сбросить</button>"),t?(e.addClass("is-choosen"),e.find(".product-filters__choosen-num").length||e.find(".product-filters__clean").length?e.find(".product-filters__choosen-num").html("("+t+")"):e.find(".product-filters__control").append('<span class="product-filters__choosen-num">('+t+")</span>").append('<span class="product-filters__clean"><svg width="8" version="1.1" xmlns="http://www.w3.org/2000/svg" height="8" viewBox="0 0 64 64" >\n<path fill="#fff" d="M28.941,31.786L0.613,60.114c-0.787,0.787-0.787,2.062,0,2.849c0.393,0.394,0.909,0.59,1.424,0.59   c0.516,0,1.031-0.196,1.424-0.59l28.541-28.541l28.541,28.541c0.394,0.394,0.909,0.59,1.424,0.59c0.515,0,1.031-0.196,1.424-0.59   c0.787-0.787,0.787-2.062,0-2.849L35.064,31.786L63.41,3.438c0.787-0.787,0.787-2.062,0-2.849c-0.787-0.786-2.062-0.786-2.848,0   L32.003,29.15L3.441,0.59c-0.787-0.786-2.061-0.786-2.848,0c-0.787,0.787-0.787,2.062,0,2.849L28.941,31.786z"/>\n</svg></span>')):(e.find(".product-filters__control").html(e.find(".product-filters__name").get(0)),e.removeClass("is-choosen"),!$(".product-filters").find(".is-choosen").length&&$(window).width()>768&&$(".product-filters__clear-all").remove())}function c(e){e.find(".product-filters__control").html(e.find(".product-filters__name").get(0)),e.find("input[type=checkbox]").prop("checked",!1),e.removeClass("is-choosen")}n($(".catalog-tags .js-read-more-container"),70),n($(".testimonial .js-read-more-container"),240),$(document).on("click",".js-read-more-toggle",(function(){const e=$(this).parent(".js-read-more-wrapper").length>0?$(this).parent(".js-read-more-wrapper"):$(this).parent(".js-read-more-additional-wrapper").find(".js-read-more-wrapper");let t=e.find(".js-read-more-container").height();$(this).hasClass("opened")?(e.removeClass("opened"),e.animate({height:i+(screen.width<991?30:0)},300),$(this).removeClass("opened"),$(this).text(a)):(e.addClass("opened"),i=e.height(),a=$(this).text(),e.animate({height:t+(screen.width<991?30:0)},300),$(this).addClass("opened"),$(this).text("Свернуть"))})),$(".js-subcategory-toggle").on("click",(function(){const e=$(this).parent(".category-sidebar__category"),t=e.siblings(".category-sidebar__subcategories");e.hasClass("opened")?(e.removeClass("opened"),t.slideUp((function(){t.removeClass("opened")}))):(e.addClass("opened"),t.slideDown(),t.addClass("opened"))})),$(".product-filters__item").on("click",".product-filters__control",(function(e){$(".product-filters__clean").has(e.target).length?c($(this).parent()):$(this).parent().hasClass("is-active")?(r($(this).parent()),$(this).parent().removeClass("is-active"),$(this).parent().find(".product-filters__list").fadeOut()):($(this).parent().addClass("is-active"),$(window).width()>768&&($(this).parent().siblings(".is-active").find(".product-filters__list").fadeOut(),$(this).parent().siblings(".is-active").removeClass("is-active")),r($(this).parent().siblings(".is-active")),$(this).parent().find(".product-filters__list").fadeIn())})),$(".product-filters").on("click",".product-filters__clear-all",(function(){$(".product-filters__item.is-choosen").each((function(){c($(this))})),$(window).width()>768&&$(this).remove()})),$(".product-filters__mob-submit").on("click",(function(){$(".product-filters").removeClass("is-active"),document.body.style.overflow="visible",r($(".product-filters__item.is-active"))})),$(document).mouseup((function(e){if($(window).width()>768){var t=$(".product-filters__item.is-active");0===t.has(e.target).length&&(r(t),t.removeClass("is-active"),t.find(".product-filters__list").fadeOut())}})),$(window).width()<767&&($(".mobile-filters.mobile-filters--sort").append($(".js-sort")),$(".mobile-filters__categories").append($(".category-tags__list")),$(".mobile-filters__tags").append($(".js-tags-filter")),$(document).on("click",".js-categories-toggle",(function(e){e.preventDefault(),$(this).parent().find(".category-tags__list").slideToggle(),$(this).parents(".mobile-filters__categories").toggleClass("is-active")})),$(document).on("click",".js-tabs-toggle",(function(e){e.preventDefault();var t=$(this).attr("href"),o="#"===t?0:$(t).offset().top;$("html, body").stop().animate({scrollTop:o},1e3)})),$(document).on("click",".js-tags-toggle",(function(e){e.preventDefault(),document.body.style.overflow="hidden",$(".product-filters").addClass("is-active"),$(".js-close-product-filters").length||$(".product-filters").prepend('<button class="js-close-product-filters close-product-filters" type="button"><svg class="icon icon-cross"><use xlink:href="/img/svg/sprite.svg#cross"></use></svg></button>')})),$(document).on("click",".js-close-product-filters",(function(e){document.body.style.overflow="visible",$(".product-filters").removeClass("is-active")}))),$(document).on("click",".js-answer-toggle",(function(){$(this).siblings(".testimonial__answer").slideToggle()}));document.querySelectorAll("input[type='tel']").forEach((function(e){IMask(e,{mask:[{mask:"{#} (000) 000-00-00",definitions:{"#":/[8]/}},{mask:"{+#} (000) 000-00-00",definitions:{"#":/[+7]/}},{mask:"{+###} (000) 000-00-00",definitions:{"#":/[+35780]/}},{mask:"+{#}0000000000000",definitions:{"#":/[1245690]/}}]})})),$(".js-scroll-to").on("click",(function(e){e.preventDefault();const t=$($(this).attr("href"));let o=147;screen.width<991&&screen.width>600?o=124:screen.width<600&&(o=105),console.log(o),t.hasClass("accordion-section")&&(t.find(".js-accordion-toggle").addClass("active"),t.find(".js-accordion-content").addClass("opened")),$([document.documentElement,document.body]).scrollTop(t.offset().top-o)}));let l=document.createElement("div");l.style.overflowY="scroll",l.style.width="50px",l.style.height="50px",document.body.append(l);const d=l.offsetWidth-l.clientWidth;l.remove();const u=function(e,t,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$("body"),n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];s.append(`<div class="clickable-bg" id=${o}></div>`),n&&($("body").css({"padding-right":d,"overflow-y":"hidden"}),$(".header.fixed").css({transition:"none",width:`calc(100% - ${d}px)`})),e&&$(".clickable-bg").addClass("clickable-bg--dark").fadeOut(1).fadeIn(400),$(document).on("click",".clickable-bg",(function(){$(this).remove(),t&&(t.removeClass("opened"),n&&($("body").css({"padding-right":0,"overflow-y":"auto"}),$(".header.fixed").css({width:"100%"}),setTimeout((function(){$(".header.fixed").css({transition:".1s ease-in-out"},200)}))))}))};$(document).on("click",".js-open-popup",(function(){$(".js-open-popup").removeClass("opened");let e=$(this).parent().find(".js-popup");e.toggleClass("opened"),u(!1,e,"popup-bg",$("body"),!1)})),$(document).on("click",".js-custom-select .custom-select-option",(function(){const e=$(this).attr("data-value"),t=$(this).text(),o=$(this).parents(".js-custom-select");o.find(".custom-select__value").text(t),setTimeout((function(){$(".clickable-bg").remove()}),50),o.find("option").each((function(){$(this).attr("value")===e&&o.find("select").val($(this).attr("value")).change()}))}));const p=(e,t)=>{$(".modal").removeClass("opened"),$(t).remove(),e.addClass("opened"),u(!0,e,t,e)};$(document).on("click",".js-open-modal",(function(e){e.preventDefault();const t=$($(this).attr("data-modal"));p(t,"modal-bg")})),$(document).on("click",".js-close-modal",(function(){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.removeClass("opened"),t&&t.remove(),$("body").css({"padding-right":0,"overflow-y":"auto"}),$(".header.fixed").css({width:"100%"}),setTimeout((function(){$(".header.fixed").css({transition:".1s ease-in-out"},200)}))}($(this).parents(".modal"),$(this).parents(".modal").find("#modal-bg"))})),$(document).on("click",".js-accordion-toggle",(function(){$(this).toggleClass("active"),$(this).next(".js-accordion-content").slideToggle(300,(function(){$(this).toggleClass("opened")}))}));$("#tes3").easyAutocomplete({data:["Москва","Пятигорск","Ростов","Краснодар","Якутск"]}),$(document).on("change",".js-file-upload",(function(){$(this).siblings(".file-upload__upload-text").text("Файлы загружены")})),$(document).on("click",".js-mobile-menu-toggle",(function(){const e=$(".mobile-menu");e.hasClass("opened")?(e.removeClass("opened"),$("#mobile-menu-bg").remove(),$("body").css({"padding-right":0,"overflow-y":"auto"}),$(".header.fixed").css({width:"100%"}),setTimeout((function(){$(".header.fixed").css({transition:".1s ease-in-out"},200)}))):(e.toggleClass("opened"),u(!0,e,"mobile-menu-bg",e,!0))})),$(document).on("click",".js-submenu-toggle",(function(e){e.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),$(this).parent().removeClass("active").siblings(".js-submenu").slideUp().removeClass("opened")):($(this).addClass("active"),$(this).parent().addClass("active").siblings(".js-submenu").slideDown().addClass("opened"))})),$(document).on("click",".js-category-mobile-toggle",(function(){$(this).hasClass("opened")?($(this).siblings(".category-sidebar__category-items").slideUp(),$(this).removeClass("opened")):($(this).siblings(".category-sidebar__category-items").slideDown(),$(this).addClass("opened"))})),$(document).on("click",".js-catalog-menu-toggle",(function(){const e=$(".catalog-menu");e.hasClass("opened")?(e.slideUp(150,(function(){e.removeClass("opened")})),$("#catalog-menu-bg").remove(),$("body").css({"padding-right":0,"overflow-y":"auto"}),$(".header.fixed").css({width:"100%"}),setTimeout((function(){$(".header.fixed").css({transition:".1s ease-in-out"},200)}))):(e.slideDown(150,(function(){e.removeAttr("style")})),e.addClass("opened"),u(!1,e,"catalog-menu-bg",e,!0))})),$(document).on("mouseenter",".js-catalog-submenu-toggle",(function(){$(".catalog-menu__submenu-box.opened").not($(this).find(".catalog-menu__submenu-box")).not($(this).parents(".catalog-menu__submenu-box")).removeClass("opened"),$(this).find(".catalog-menu__submenu-box").eq(0).addClass("opened")})),$(document).on("mouseleave",".js-catalog-submenu-toggle",(function(){setTimeout(()=>{$(this).is(":hover")||0!==$(this).find(".catalog-menu__submenu-box:hover").length||$(this).find(".catalog-menu__submenu-box").removeClass("opened")},350)})),$(document).on("mouseleave",".catalog-menu__inner",(function(){const e=$(".catalog-menu");setTimeout(()=>{$(this).is(":hover")||(e.slideUp((function(){e.removeClass("opened")})),$("#catalog-menu-bg").remove(),$("body").css({"padding-right":0,"overflow-y":"auto"}),$(".header.fixed").css({width:"100%"}),setTimeout((function(){$(".header.fixed").css({transition:".1s ease-in-out"},200)})))},350)})),screen.width<1101&&($(".footer__nav-title").removeClass("active"),$(".footer__nav-items").removeClass("opened"))}));
//# sourceMappingURL=main.min.js.map
